"use strict";(self.webpackChunksocial_network_ts=self.webpackChunksocial_network_ts||[]).push([[499],{7058:function(e,n,t){t.r(n),t.d(n,{ChatPage:function(){return p}});var a=t(2791),s=t(5531),r=t(3430),o=t(7732),u=t(7734),c=t(3971),i=t(2426),l=t.n(i),h=t(184),d=function(e){var n=e.chatMessage,t=(0,a.useRef)(null),s=n.message,r=n.userName,i=n.photo;return(0,a.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[n]),(0,h.jsx)("div",{ref:t,children:(0,h.jsx)(o.Z,{author:(0,h.jsx)("a",{children:r}),avatar:(0,h.jsx)(u.C,{src:i,alt:"Han Solo"}),content:(0,h.jsx)("p",{children:s}),datetime:(0,h.jsx)(c.Z,{title:l()().format("YYYY-MM-DD HH:mm:ss"),children:(0,h.jsx)("span",{children:l()().fromNow()})})})})},m=function(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],o=n[1];(0,a.useEffect)((function(){new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx").addEventListener("message",(function(e){var n=JSON.parse(e.data);o((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(n))}))}))}),[]);var u=t.map((function(e,n){return(0,h.jsx)(d,{chatMessage:e},n+""+e.userId)}));return(0,h.jsx)(h.Fragment,{children:u})},f=t(7031),x=t(3272),j=t(435),v=t(8009),g=t(4748),w=f.Z.TextArea,C=function(e){var n=e.onChange,t=e.onSubmit,a=e.submitting,s=e.value;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x.Z.Item,{children:(0,h.jsx)(w,{rows:4,onChange:n,value:s})}),(0,h.jsx)(x.Z.Item,{children:(0,h.jsx)(j.Z,{htmlType:"submit",loading:a,onClick:t,type:"default",children:"Add Comment"})})]})},Z=function(){var e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),n=(0,v.CG)(v.Qf),t=(0,a.useState)(!1),s=(0,r.Z)(t,2),c=s[0],i=s[1],l=(0,a.useState)(g.v6),d=(0,r.Z)(l,2),m=d[0],f=d[1];if(!n)return null;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.Z,{avatar:(0,h.jsx)(u.C,{src:n.small,alt:"photo user"}),content:(0,h.jsx)(C,{onChange:function(e){f(e.target.value)},onSubmit:function(){m&&(i(!0),setTimeout((function(){e.send(m),i(!1),f(g.v6)}),1e3))},submitting:c,value:m})})})},k="chatPage_container__S4TOn",p=function(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:k,children:(0,h.jsx)(m,{})}),(0,h.jsx)(Z,{})]})}}}]);
//# sourceMappingURL=499.52801cdf.chunk.js.map